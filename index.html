<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PAV+</title>

<style>
:root{
--gold:#d4af37;
--bg:#0b0b0d;
--card:#151518;
--text:#ffffff;
}

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
}

body{
background:var(--bg);
color:var(--text);
}

/* LOCK SCREEN */

#lockScreen{
position:fixed;
inset:0;
background:black;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
z-index:1000;
}

.pinDisplay{
font-size:32px;
letter-spacing:15px;
margin-bottom:25px;
color:var(--gold);
}

.keypad{
display:grid;
grid-template-columns:repeat(3,80px);
gap:15px;
}

.key{
height:80px;
width:80px;
border-radius:50%;
background:#111;
border:1px solid var(--gold);
display:flex;
align-items:center;
justify-content:center;
font-size:24px;
cursor:pointer;
transition:.2s;
}

.key:active{
background:var(--gold);
color:black;
}

/* APP */

#app{
display:none;
padding:20px;
padding-bottom:80px;
}

.header{
font-size:24px;
margin-bottom:20px;
color:var(--gold);
}

.card{
background:var(--card);
padding:20px;
border-radius:15px;
margin-bottom:20px;
border:1px solid rgba(212,175,55,.3);
}

input{
width:100%;
padding:12px;
margin-top:10px;
border-radius:8px;
border:none;
background:#222;
color:white;
}

button{
margin-top:10px;
padding:10px 15px;
border:none;
border-radius:8px;
background:var(--gold);
color:black;
font-weight:bold;
cursor:pointer;
}

/* CAMERA GRID */

.cameraGrid{
display:grid;
grid-template-columns:1fr 1fr;
gap:10px;
}

.camera{
background:black;
border-radius:10px;
overflow:hidden;
position:relative;
}

.camera iframe{
width:100%;
height:160px;
border:none;
}

.camera.fullscreen{
position:fixed;
inset:0;
z-index:999;
}

.camera.fullscreen iframe{
height:100%;
}

.footer{
text-align:center;
opacity:.4;
margin-top:30px;
font-size:12px;
}
</style>
</head>
<body>

<!-- LOCK SCREEN -->
<div id="lockScreen">
<div class="pinDisplay" id="pinDisplay">----</div>
<div class="keypad" id="keypad"></div>
</div>

<!-- APP -->
<div id="app">

<div class="header">PAV+ Monitoring</div>

<div class="card">
<h3>Dodaj kamerę</h3>
<input id="cameraInput" placeholder="Wklej URL streamu (https://...)">
<button onclick="addCamera()">Dodaj kamerę</button>
</div>

<div class="card">
<h3>Kamery (2x2)</h3>
<div class="cameraGrid" id="cameraGrid"></div>
</div>

<div class="footer">PAV+ Secure System</div>

</div>

<script>

/* PIN SYSTEM */

const PIN = "1111";
let entered = "";

function updateDisplay(){
document.getElementById("pinDisplay").innerText =
entered.padEnd(4,"-");
}

function press(val){

if(val === "C"){
entered="";
updateDisplay();
return;
}

if(val === "OK"){
if(entered === PIN){
unlock();
}else{
alert("Nieprawidłowy PIN");
}
entered="";
updateDisplay();
return;
}

if(entered.length < 4){
entered += val;
updateDisplay();
}
}

function unlock(){
document.getElementById("lockScreen").style.display="none";
document.getElementById("app").style.display="block";
}

function createKey(val){
let key = document.createElement("div");
key.className="key";
key.innerText=val;
key.onclick=()=>press(val);
document.getElementById("keypad").appendChild(key);
}

for(let i=1;i<=9;i++) createKey(i);
createKey("C");
createKey(0);
createKey("OK");

updateDisplay();

/* CAMERA SYSTEM */

let cameras = JSON.parse(localStorage.getItem("pav_cameras")) || [];

function renderCameras(){
let grid = document.getElementById("cameraGrid");
grid.innerHTML = "";

cameras.forEach(url=>{
let div = document.createElement("div");
div.className="camera";
div.innerHTML = "<iframe src='"+url+"'></iframe>";
div.onclick = ()=>div.classList.toggle("fullscreen");
grid.appendChild(div);
});
}

function addCamera(){
let url = document.getElementById("cameraInput").value;
if(!url) return;

cameras.push(url);
localStorage.setItem("pav_cameras", JSON.stringify(cameras));
document.getElementById("cameraInput").value="";
renderCameras();
}

renderCameras();

</script>

</body>
</html>
